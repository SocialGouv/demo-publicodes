(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{3602:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/algorithmes/[...algorithme]",function(){return n(3389)}])},3389:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return b},default:function(){return p}});var l=n(2322),r=n(6906),s=n(2139),i=n(1608),a=n(7273),u=n(5145),c=n(2784),o=n(6254);let d=e=>{let t=null==e?void 0:e.situation,n=e.rule,l=e.rules,[r,s]=(0,c.useState)(null),[i,a]=(0,c.useState)(t),[u,d]=(0,c.useState)(null);(0,c.useEffect)(()=>{a({}),s(null);let e=new o.ZP(l);d(e)},[l]);let h=(e,t)=>{if(isNaN(t)?"oui"===t||"non"===t||(t="'".concat(t,"'")):t=parseFloat(t),t){let n={...i,[e]:t};a(n),u&&u.setSituation(n)}},x=u&&u.evaluate(n),j=x&&Object.entries(x.missingVariables)||[];return null===r&&Object.values(j).length&&s(Object.values(j).map(e=>{let[t]=e;return t})),{engine:u,evaluated:x,situation:i,setSituationValue:h,allMissingVariables:r}},h=e=>{var t;let{meta:n}=e;return n&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:n.titre}),(0,l.jsx)("p",{dangerouslySetInnerHTML:{__html:(null===(t=n.description)||void 0===t?void 0:t.replace(/\n/g,"<br/>"))||""}}),n.références&&(0,l.jsxs)("div",{children:[(0,l.jsxs)("b",{children:["Source",Object.keys(n.références).length>1?"s":"",":"]})," ",Object.keys(n.références).map(e=>(0,l.jsx)("li",{children:(0,l.jsx)("a",{href:n.références[e],children:e})},e))]})]})},x=e=>{let{rules:t,onChange:n}=e,r=Object.keys(t).filter(e=>e.match(/^question\d+$/)),s=e=>{let n=Object.entries(t).find(t=>{let[n,l]=t;return n===e});return n&&n[1]},i=e=>Object.keys(t).filter(t=>t.match(e)).map(e=>t[e]);return(0,l.jsx)("div",{children:r.map(e=>{let t=s(e),r=i(RegExp("^".concat(e," . reponse\\d+$")));return t&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{children:t.question}),r.map((t,r)=>(0,l.jsxs)("li",{children:[(0,l.jsx)("input",{type:"radio",name:e,onChange:l=>n("".concat(e," . reponse"),t.texte),id:"".concat(e,"-reponse").concat(r+1)}),(0,l.jsxs)("label",{htmlFor:"".concat(e,"-reponse").concat(r+1),children:["\xa0",t.texte]})]},t.texte)),(0,l.jsx)("br",{})]},e)})})},j={epds:x};var b=!0;function p(e){var t,n,c;let{algorithme:o}=e,x=s.Z[(0,r.Z)(o[0])],b=x.rules,p=x.yaml,{engine:v,situation:f,evaluated:g,setSituationValue:m,allMissingVariables:_}=d({rules:b,rule:"r\xe9sultat",situation:{}}),T=e=>t=>{m(e,t.currentTarget.value||"")},y=e=>{let t=v&&v.getRule(e);return t&&t.rawNode.question||null},w=v&&(null===(t=v.getParsedRules())||void 0===t?void 0:null===(n=t.meta)||void 0===n?void 0:n.rawNode),N=j[o]||null;return console.log({situation:f,allMissingVariables:_}),(0,l.jsxs)("div",{children:[(0,l.jsx)("br",{}),(0,l.jsx)(h,{meta:w}),(0,l.jsx)("br",{}),(0,l.jsxs)(i.Tabs,{defaultActiveTab:0,children:[(0,l.jsx)(i.Tab,{label:"Formulaire",children:N?(0,l.jsx)(N,{rules:b,onChange:(e,t)=>m(e,t)}):_&&_.length&&_.map(e=>(0,l.jsxs)("div",{children:[y(e)||e,(0,l.jsx)("br",{}),(0,l.jsx)(i.TextInput,{type:"text",style:{textAlign:"center",width:100},onBlur:T(e)},"".concat(o,"-").concat(e)),(0,l.jsx)("hr",{})]},e))||null}),(0,l.jsx)(i.Tab,{label:"Algorithme",children:(0,l.jsx)(a.Z,{language:"yaml",style:u.rJ,children:p})}),(0,l.jsx)(i.Tab,{label:"Tests",children:"Todo: lancer les tests unitaires"})]}),(0,l.jsx)("h5",{dangerouslySetInnerHTML:{__html:(null==g?void 0:null===(c=g.nodeValue)||void 0===c?void 0:c.toString().replace(/\n/g,"<br/>"))||""}})]})}}},function(e){e.O(0,[464,661,774,888,179],function(){return e(e.s=3602)}),_N_E=e.O()}]);